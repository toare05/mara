# 마라톤 대회 데이터 소스 및 수집 전략

## 1. 가능한 데이터 소스

### 1.1 공식 마라톤 대회 웹사이트
- **장점**: 정확하고 공식적인 정보
- **단점**: 개별 수집 필요, 자동화 어려움
- **예시**:
  - 서울마라톤 공식 웹사이트
  - 부산마라톤 공식 웹사이트
  - 춘천마라톤 공식 웹사이트

### 1.2 마라톤 플랫폼 및 캘린더
- **장점**: 여러 대회 정보가 집약되어 있음
- **단점**: API가 제공되지 않을 수 있음
- **예시**:
  - 런데이 (https://runday.co.kr/)
  - 러너스하이 (https://www.runnershigh.kr/)
  - 러닝크루 (https://runningcrew.co.kr/)

### 1.3 스포츠 관련 공공데이터
- **장점**: 공식적이고 구조화된 데이터
- **단점**: 업데이트 주기가 길 수 있음
- **예시**:
  - 공공데이터포털 체육시설 정보
  - 지자체 체육행사 정보

### 1.4 크라우드소싱 데이터
- **장점**: 다양한 사용자로부터 정보 수집 가능
- **단점**: 데이터 검증 필요
- **방법**: 사용자가 대회 정보 제보 기능 제공

## 2. 데이터 수집 전략

### 2.1 수동 데이터 입력 (초기 단계)
- **방법**: 주요 마라톤 대회 정보를 수동으로 DB에 입력
- **장점**: 정확한 데이터 보장
- **단점**: 시간과 노력 소요
- **구현 계획**:
  - 데이터 입력 양식 개발
  - 초기 핵심 대회 목록 작성 (약 20-30개)
  - 정기적 업데이트 일정 수립

### 2.2 웹 스크래핑 (2단계)
- **방법**: 주요 마라톤 정보 사이트에서 정보 자동 수집
- **장점**: 대량의 데이터 확보 가능
- **단점**: 사이트 구조 변경 시 스크립트 수정 필요
- **구현 계획**:
  - Ruby의 Nokogiri와 Mechanize 활용
  - 일간/주간 크롤링 작업 스케줄링
  - 중복 데이터 처리 로직 구현

### 2.3 API 연동 (가능한 경우)
- **방법**: 제3자 API를 통한 데이터 수집
- **장점**: 자동화된 최신 데이터 확보
- **단점**: API 의존성, 비용 발생 가능
- **구현 계획**:
  - 잠재적 API 파트너 탐색
  - 웹훅/콜백 연동 구현
  - 데이터 동기화 로직 개발

### 2.4 하이브리드 접근법 (권장)
- **방법**: 수동 입력 + 자동 수집 + API 통합
- **장점**: 다양한 소스로 데이터 정확성 및 포괄성 향상
- **단점**: 구현 복잡성 증가
- **구현 계획**:
  - 중앙 데이터 레포지토리 구축
  - 다양한 소스에서 수집된 데이터 통합
  - 중복 제거 및 검증 프로세스 구현

## 3. 데이터 구조 및 표준화

### 3.1 핵심 데이터 필드
- **필수 필드**:
  - 대회명 (name)
  - 개최 일자 (date)
  - 위치/지역 (location)
  - 지도 좌표 (location_x, location_y)
  - 대회 유형 (race_type)
- **선택 필드**:
  - 등록 링크 (registration_link)
  - 참가비 (fee)
  - 인원 제한 (capacity)
  - 등록 마감일 (deadline)
  - 코스 정보 (course_map)

### 3.2 데이터 표준화 프로세스
- **위치 정보 표준화**:
  - 주소를 일관된 형식으로 변환
  - 좌표는 상대적 위치 (0.0 ~ 1.0)로 변환하여 SVG 지도에 배치
- **날짜 형식 표준화**:
  - ISO 8601 형식 사용 (YYYY-MM-DD)
- **대회 유형 표준화**:
  - 풀마라톤 (42.195km)
  - 하프마라톤 (21.0975km)
  - 10K (10km)
  - 5K (5km)
  - 기타

## 4. 데이터 업데이트 주기 및 유지관리

### 4.1 정기 업데이트 일정
- **자동화된 크롤링**: 주 1회 (일요일 자정)
- **데이터 검증**: 주 1회 (월요일)
- **수동 데이터 입력/수정**: 필요시 (새 대회 공지 시)

### 4.2 데이터 품질 관리
- **자동화된 검증**:
  - 날짜 유효성 검사
  - 필수 필드 존재 여부 검사
  - 중복 데이터 검사
- **수동 검증**:
  - 새로 추가된 데이터 샘플 검토
  - 사용자 피드백 기반 검토

### 4.3 오래된 데이터 처리
- 지난 대회는 별도 아카이브로 이동
- 연간 반복 대회는 다음 회차 정보로 업데이트
- 역사적 데이터 보존 (선택 사항)

## 5. 데이터 수집 구현 계획

### 5.1 초기 구현 (1단계)
- **작업 내용**:
  - db/seeds.rb에 초기 대회 데이터 포함
  - 수동 데이터 입력 폼 개발

### 5.2 자동화 구현 (2단계)
- **작업 내용**:
  - 스크래핑 rake 태스크 개발
  - 주요 마라톤 정보 사이트 연동
  - 데이터 중복 검사 및 병합 로직

### 5.3 통합 및 최적화 (3단계)
- **작업 내용**:
  - API 연동 (가능한 소스)
  - 자동/수동 데이터 통합 시스템
  - 데이터 품질 모니터링 개발

## 6. 데이터 관련 법적 고려사항

### 6.1 저작권 및 라이센스
- 각 데이터 소스의 이용약관 및 라이센스 검토
- 필요시 소스 표기 및 승인 획득

### 6.2 개인정보 보호
- 개인 식별 정보는 수집하지 않음
- 공개된 이벤트 정보만 활용

---

이 문서는 프로젝트의 진행 상황과 데이터 소스 가용성에 따라 업데이트될 수 있습니다. 